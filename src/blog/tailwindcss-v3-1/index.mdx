import { adamwathan } from "@/app/blog/authors";
import { CodeExample, js, css, CodeExampleGroup, CodeBlock } from "@/components/code-example";
import { Example } from "@/components/example.tsx";
import { Figure } from "@/components/figure";
import card from "./card.jpg";
import discordMessage from "./discord-message.png";
import { Image, YouTubeVideo } from "@/components/media";
import Link from "next/link";

export const meta = {
  title: "Tailwind CSS v3.1: ¬øQuieres volverte loco? ¬°Vamos, volv√°monos locos!",
  description: `Ahora con tipos TypeScript de primera parte, variantes arbitrarias, DX de variables CSS mejorado y mucho m√°s.`,
  date: "2022-06-07T15:00:00.000Z",
  authors: [adamwathan],
  image: card,
  excerpt: (
    <>
      Han pasado unos seis meses desde que lanzamos <Link href="/blog/tailwindcss-v3">Tailwind CSS v3.0</Link>, y aunque
      hemos estado recopilando muchas peque√±as mejoras en el c√≥digo base desde entonces, simplemente no ten√≠amos{" "}
      <em>esa caracter√≠stica √∫nica</em> que te hace decir
      <em>"ok, es hora de lanzar la versi√≥n"</em>.
    </>
  ),
};

<YouTubeVideo id="nOQyWbPO2Ds" />

Han pasado unos seis meses desde que lanzamos [Tailwind CSS v3.0](/blog/tailwindcss-v3), y aunque hemos estado recopilando muchas peque√±as mejoras en el c√≥digo base desde entonces, simplemente no ten√≠amos _esa caracter√≠stica √∫nica_ todav√≠a que te hace decir _"ok, es hora de lanzar la versi√≥n"_.

Luego, un s√°bado por la noche al azar hace un par de semanas, estaba hablando con Robin en nuestro Discord sobre c√≥mo encontrar una manera de apuntar al elemento `html` usando `:has` y una clase m√°s profunda en el documento, y expliqu√© c√≥mo pens√© que se ver√≠a si a√±adi√©ramos soporte para variantes arbitrarias ‚Äî algo que he querido abordar durante m√°s de un a√±o:

<Image
  alt={`Adam Wathan: Creo que si hacemos variantes arbitrarias, la sintaxis deber√≠a ser exactamente eso, '[html:has(&)]:bg-blue-500'. Siento que eso es bastante flexible, como cualquier cosa que puedas hacer con una variante real tambi√©n puedes hacerla con una variante arbitraria ya que son lo mismo. '[&>*:not(:first-child)]:pl-4'. Robin: Esto va a romperme el cerebro jaja porque '[html:has(&)]:bg-blue-500' se usar√≠a como un literal dentro del '&'. Eso en combinaci√≥n con otras variantes... ü§Ø. Adam Wathan: üòÖ ser√° un derrite-cerebros seguro. El CSS ser√≠a este lol 'html:has([html:has(&)]:bg-blue-500) { background: blue 500 }'. Robin: exacto jaja. ok, ahora quiero probar eso brb.`}
  src={discordMessage}
/>

Veinte minutos despu√©s, Robin ten√≠a una prueba de concepto funcional _(¬°en seis l√≠neas de c√≥digo!)_, y despu√©s de otra hora m√°s o menos de Jordan realizando milagros de regex en nuestro motor de detecci√≥n de clases, nacieron las [variantes arbitrarias](https://github.com/tailwindlabs/tailwindcss/pull/8299) y tuvimos nuestra caracter√≠stica digna de lanzamiento.

As√≠ que aqu√≠ est√° ‚Äî ¬°Tailwind CSS v3.1! Para una lista completa de cada arreglo y mejora, consulta las [notas de la versi√≥n](https://github.com/tailwindlabs/tailwindcss/releases/tag/v3.1.0), pero aqu√≠ est√°n los puntos destacados:

- [Tipos TypeScript de primera parte](#first-party-type-script-types)
- [Soporte integrado para importaciones CSS en la CLI](#built-in-support-for-css-imports-in-the-cli)
- [Cambiar la opacidad del color al usar la funci√≥n theme](#change-color-opacity-when-using-the-theme-function)
- [Configuraci√≥n de color de variable CSS m√°s f√°cil](#easier-css-variable-color-configuration)
- [Utilidades de espaciado de borde](#border-spacing-utilities)
- [Variantes Enabled y optional](#enabled-and-optional-variants)
- [Variantes Prefers-contrast](#prefers-contrast-variants)
- [Estilizar backdrops de di√°logo nativos](#style-native-dialog-backdrops)
- [Valores arbitrarios pero para variantes](#arbitrary-values-but-for-variants)

Actualiza tus proyectos instalando la √∫ltima versi√≥n de `tailwindcss` desde npm:

```sh
npm install tailwindcss@latest
```

O abre un [Tailwind Play](https://play.tailwindcss.com) para jugar con todas las novedades directamente en el navegador.

---

## Tipos TypeScript de primera parte

Ahora estamos enviando tipos para todas nuestras APIs JS con las que trabajas al usar Tailwind, especialmente el archivo `tailwind.config.js`. Esto significa que obtienes todo tipo de soporte √∫til del IDE, y hace que sea mucho m√°s f√°cil hacer cambios en tu configuraci√≥n sin consultar tanto la documentaci√≥n.

Para configurarlo, simplemente a√±ade la anotaci√≥n de tipo sobre la definici√≥n de tu configuraci√≥n:

```js
// [!code filename:tailwind.config.js]
/** @type {import('tailwindcss').Config} */ // [!code ++]
module.exports = {
  content: [
    // ...
  ],
  theme: {
    extend: {},
  },
  plugins: [],
};
```

Si eres un gran nerd de TypeScript, podr√≠as disfrutar husmeando en las [definiciones de tipos](https://github.com/tailwindlabs/tailwindcss/blob/4a745439f010aca2ea24bb7fd9ab0ac3e15a40c1/types/config.d.ts) reales ‚Äî hay muchas cosas interesantes sucediendo all√≠ para soportar un objeto potencialmente tan complejo.

## Soporte integrado para importaciones CSS en la CLI

Si est√°s usando nuestra herramienta CLI para compilar tu CSS, [`postcss-import`](https://github.com/postcss/postcss-import) ahora est√° integrado directamente para que puedas organizar tu CSS personalizado en m√∫ltiples archivos sin ninguna configuraci√≥n adicional.

<CodeExampleGroup filenames={["main.css", "select2-theme.css"]}>
  <CodeBlock
    example={css`
      @import "tailwindcss/base";
      /* [!code highlight:2] */
      @import "./select2-theme.css";
      @import "tailwindcss/components";
      @import "tailwindcss/utilities";
    `}
  />
  <CodeBlock
    example={css`
      .select2-dropdown {
        @apply rounded-b-lg shadow-md;
      }
      .select2-search {
        @apply rounded border border-gray-300;
      }
      .select2-results__group {
        @apply text-lg font-bold text-gray-900;
      }
      /* ... */
    `}
  />
</CodeExampleGroup>

Si no est√°s usando nuestra herramienta CLI y en su lugar est√°s usando Tailwind como un plugin de PostCSS, todav√≠a necesitar√°s instalar y configurar `postcss-import` t√∫ mismo, tal como lo haces con `autoprefixer`, pero si _est√°s_ usando nuestra herramienta CLI, esto funcionar√° totalmente ahora.

Esto es especialmente √∫til si est√°s usando nuestra [CLI independiente](/blog/standalone-cli) y no quieres instalar ninguna dependencia de node en absoluto.

## Cambiar la opacidad del color al usar la funci√≥n theme

No creo que mucha gente sepa esto, pero Tailwind expone una [`funci√≥n theme()`](https://v3.tailwindcss.com/docs/functions-and-directives#theme) a tus archivos CSS que te permite obtener valores de tu archivo de configuraci√≥n ‚Äî convirti√©ndolos en una especie de variables que puedes reutilizar.

```css
/* [!code filename:select2-theme.css] */
.select2-dropdown {
  border-radius: theme(borderRadius.lg);
  background-color: theme(colors.gray.100);
  color: theme(colors.gray.900);
}
/* ... */
```

Una limitaci√≥n, sin embargo, era que no pod√≠as ajustar el canal alfa de ning√∫n color que obtuvieras de esta manera. As√≠ que en v3.1 hemos a√±adido soporte para usar una sintaxis de barra inclinada para ajustar la opacidad, como puedes hacer con las funciones de color CSS modernas `rgb` y `hsl`:

```css
/* [!code filename:select2-theme.css] */
.select2-dropdown {
  border-radius: theme(borderRadius.lg);
  /* [!code highlight:2] */
  background-color: theme(colors.gray.100 / 50%);
  color: theme(colors.gray.900);
}
/* ... */
```

Hemos hecho que esto funcione tambi√©n con la funci√≥n `theme` en tu archivo `tailwind.config.js`:

```js
// [!code filename:tailwind.config.js]
module.exports = {
  content: [
    // ...
  ],
  theme: {
    extend: {
      colors: ({ theme }) => ({
        primary: theme("colors.blue.500"),
        // [!code highlight:2]
        "primary-fade": theme("colors.blue.500 / 75%"),
      }),
    },
  },
  plugins: [],
};
```

Incluso puedes usar estas cosas en valores arbitrarios, lo cual es bastante salvaje ‚Äî honestamente sorprendentemente √∫til para gradientes personalizados extra√±os y cosas as√≠:

```html
<div class="bg-[image:linear-gradient(to_right,theme(colors.red.500)_75%,theme(colors.red.500/25%))]">
  <!-- ... -->
</div>
```

Cualquier cosa para evitar editar un archivo CSS, ¬øverdad?

## Configuraci√≥n de color de variable CSS m√°s f√°cil

Si te gusta definir y configurar tus colores como variables CSS, probablemente tengas alg√∫n boilerplate horrible como este en tu archivo `tailwind.config.js` ahora mismo:

```js
// [!code filename:tailwind.config.js]
function withOpacityValue(variable) {
  return ({ opacityValue }) => {
    if (opacityValue === undefined) {
      return `rgb(var(${variable}))`;
    }
    return `rgb(var(${variable}) / ${opacityValue})`;
  };
}

module.exports = {
  theme: {
    colors: {
      primary: withOpacityValue("--color-primary"),
      secondary: withOpacityValue("--color-secondary"),
      // ...
    },
  },
};
```

Hemos hecho esto mucho menos horrible en v3.1 a√±adiendo soporte para definir tus colores con una cadena de formato en lugar de tener que usar una funci√≥n:

```js
// [!code filename:tailwind.config.js]
module.exports = {
  theme: {
    colors: {
      primary: "rgb(var(--color-primary) / <alpha-value>)",
      secondary: "rgb(var(--color-secondary) / <alpha-value>)",
      // ...
    },
  },
};
```

En lugar de escribir una funci√≥n que recibe ese argumento `opacityValue`, puedes simplemente escribir una cadena con un marcador de posici√≥n `<alpha-value>`, y Tailwind reemplazar√° ese marcador de posici√≥n con el valor alfa correcto basado en la utilidad.

Si no has visto nada de esto antes, consulta nuestra [documentaci√≥n actualizada de Uso de variables CSS](https://v3.tailwindcss.com/docs/customizing-colors#using-css-variables) para obtener m√°s detalles.

## Utilidades de espaciado de borde

Hemos a√±adido un nuevo conjunto de utilidades para la propiedad `border-spacing`, para que puedas controlar el espacio entre los bordes de la tabla al usar [bordes separados](https://v3.tailwindcss.com/docs/border-collapse#separate):

<Figure>

<Example>
  {
    <div className="px-4 py-8 sm:px-8">
      <table className="w-full border-separate border-spacing-2 text-sm">
        <thead className="bg-slate-100 dark:bg-slate-700">
          <tr>
            <th className="w-1/2 border border-slate-300 p-4 text-left font-semibold text-slate-900 dark:border-slate-600 dark:text-slate-200">
              <>Estado</>
            </th>
            <th className="w-1/2 border border-slate-300 p-4 text-left font-semibold text-slate-900 dark:border-slate-600 dark:text-slate-200">
              <>Ciudad</>
            </th>
          </tr>
        </thead>
        <tbody className="bg-white">
          <tr>
            <td className="border border-slate-300 p-4 text-slate-500 dark:border-slate-700 dark:text-slate-400">
              Indiana
            </td>
            <td className="border border-slate-300 p-4 text-slate-500 dark:border-slate-700 dark:text-slate-400">
              <>Indian√°polis</>
            </td>
          </tr>
          <tr>
            <td className="border border-slate-300 p-4 text-slate-500 dark:border-slate-700 dark:text-slate-400">
              Ohio
            </td>
            <td className="border border-slate-300 p-4 text-slate-500 dark:border-slate-700 dark:text-slate-400">
              Columbus
            </td>
          </tr>
          <tr>
            <td className="border border-slate-300 p-4 text-slate-500 dark:border-slate-700 dark:text-slate-400">
              Michigan
            </td>
            <td className="border border-slate-300 p-4 text-slate-500 dark:border-slate-700 dark:text-slate-400">
              Detroit
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  }
</Example>

```html
<!-- [!code word:border-spacing-2] -->
<table class="border-separate border-spacing-2 ...">
  <thead>
    <tr>
      <th class="border border-slate-300 ...">Estado</th>
      <th class="border border-slate-300 ...">Ciudad</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="border border-slate-300 ...">Indiana</td>
      <td class="border border-slate-300 ...">Indian√°polis</td>
    </tr>
    <!-- ... -->
  </tbody>
</table>
```

</Figure>

S√© lo que est√°s pensando ‚Äî _"Nunca en mi vida he querido construir una tabla que se vea as√≠..."_ ‚Äî ¬°pero escucha por un segundo!

Una situaci√≥n en la que esto es realmente s√∫per √∫til es al construir una tabla con una fila de encabezado fija (sticky) y quieres un borde inferior persistente debajo de los encabezados:

<Figure hint="Despl√°zate por esta tabla para ver la fila de encabezado fija en acci√≥n">

<Example padding={false}>
  {
    <div className="isolate h-72 overflow-auto rounded-xl">
      <table className="min-w-full border-separate border-spacing-0">
        <thead className="bg-gray-50">
          <tr>
            <th
              scope="col"
              className="bg-opacity-75 sticky top-0 z-10 border-b border-gray-300 bg-gray-50 py-3.5 pr-3 pl-4 text-left text-sm font-semibold text-gray-900 backdrop-blur backdrop-filter sm:pl-6 lg:pl-8"
            >
              <>Nombre</>
            </th>
            <th
              scope="col"
              className="bg-opacity-75 sticky top-0 z-10 hidden border-b border-gray-300 bg-gray-50 px-3 py-3.5 text-left text-sm font-semibold text-gray-900 backdrop-blur backdrop-filter lg:table-cell"
            >
              <>Email</>
            </th>
            <th
              scope="col"
              className="bg-opacity-75 sticky top-0 z-10 border-b border-gray-300 bg-gray-50 px-3 py-3.5 text-left text-sm font-semibold text-gray-900 backdrop-blur backdrop-filter"
            >
              <>Rol</>
            </th>
          </tr>
        </thead>
        <tbody className="bg-white">
          <tr>
            <td className="border-b border-gray-200 py-4 pr-3 pl-4 text-sm font-medium whitespace-nowrap text-gray-900 sm:pl-6 lg:pl-8">
              <>Courtney Henry</>
            </td>
            <td className="hidden border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500 lg:table-cell">
              <>courtney.henry@example.com</>
            </td>
            <td className="border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500">Admin</td>
          </tr>
          <tr>
            <td className="border-b border-gray-200 py-4 pr-3 pl-4 text-sm font-medium whitespace-nowrap text-gray-900 sm:pl-6 lg:pl-8">
              <>Tom Cook</>
            </td>
            <td className="hidden border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500 lg:table-cell">
              <>tom.cook@example.com</>
            </td>
            <td className="border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500">Miembro</td>
          </tr>
          <tr>
            <td className="border-b border-gray-200 py-4 pr-3 pl-4 text-sm font-medium whitespace-nowrap text-gray-900 sm:pl-6 lg:pl-8">
              <>Whitney Francis</>
            </td>
            <td className="hidden border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500 lg:table-cell">
              <>whitney.francis@example.com</>
            </td>
            <td className="border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500">Admin</td>
          </tr>
          <tr>
            <td className="border-b border-gray-200 py-4 pr-3 pl-4 text-sm font-medium whitespace-nowrap text-gray-900 sm:pl-6 lg:pl-8">
              <>Leonard Krasner</>
            </td>
            <td className="hidden border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500 lg:table-cell">
              <>leonard.krasner@example.com</>
            </td>
            <td className="border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500">Propietario</td>
          </tr>
          <tr>
            <td className="border-b border-gray-200 py-4 pr-3 pl-4 text-sm font-medium whitespace-nowrap text-gray-900 sm:pl-6 lg:pl-8">
              <>Floyd Miles</>
            </td>
            <td className="hidden border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500 lg:table-cell">
              <>floyd.miles@example.com</>
            </td>
            <td className="border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500">Miembro</td>
          </tr>
          <tr>
            <td className="border-b border-gray-200 py-4 pr-3 pl-4 text-sm font-medium whitespace-nowrap text-gray-900 sm:pl-6 lg:pl-8">
              <>Emily Selman</>
            </td>
            <td className="hidden border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500 lg:table-cell">
              <>emily.selman@example.com</>
            </td>
            <td className="border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500">Miembro</td>
          </tr>
          <tr>
            <td className="border-b border-gray-200 py-4 pr-3 pl-4 text-sm font-medium whitespace-nowrap text-gray-900 sm:pl-6 lg:pl-8">
              <>Kristin Watson</>
            </td>
            <td className="hidden border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500 lg:table-cell">
              <>kristin.watson@example.com</>
            </td>
            <td className="border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500">Admin</td>
          </tr>
          <tr>
            <td className="border-b border-gray-200 py-4 pr-3 pl-4 text-sm font-medium whitespace-nowrap text-gray-900 sm:pl-6 lg:pl-8">
              <>Emma Dorsey</>
            </td>
            <td className="hidden border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500 lg:table-cell">
              <>emma.dorsey@example.com</>
            </td>
            <td className="border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500">Miembro</td>
          </tr>
          <tr>
            <td className="border-b border-gray-200 py-4 pr-3 pl-4 text-sm font-medium whitespace-nowrap text-gray-900 sm:pl-6 lg:pl-8">
              <>Alicia Bell</>
            </td>
            <td className="hidden border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500 lg:table-cell">
              <>alicia.bell@example.com</>
            </td>
            <td className="border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500">Admin</td>
          </tr>
          <tr>
            <td className="border-b border-gray-200 py-4 pr-3 pl-4 text-sm font-medium whitespace-nowrap text-gray-900 sm:pl-6 lg:pl-8">
              <>Jenny Wilson</>
            </td>
            <td className="hidden border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500 lg:table-cell">
              <>jenny.wilson@example.com</>
            </td>
            <td className="border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500">Propietario</td>
          </tr>
          <tr>
            <td className="border-b border-gray-200 py-4 pr-3 pl-4 text-sm font-medium whitespace-nowrap text-gray-900 sm:pl-6 lg:pl-8">
              <>Anna Roberts</>
            </td>
            <td className="hidden border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500 lg:table-cell">
              <>anna.roberts@example.com</>
            </td>
            <td className="border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500">Miembro</td>
          </tr>
          <tr>
            <td className="border-b border-gray-200 py-4 pr-3 pl-4 text-sm font-medium whitespace-nowrap text-gray-900 sm:pl-6 lg:pl-8">
              <>Benjamin Russel</>
            </td>
            <td className="hidden border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500 lg:table-cell">
              <>benjamin.russel@example.com</>
            </td>
            <td className="border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500">Miembro</td>
          </tr>
          <tr>
            <td className="border-b border-gray-200 py-4 pr-3 pl-4 text-sm font-medium whitespace-nowrap text-gray-900 sm:pl-6 lg:pl-8">
              <>Jeffrey Webb</>
            </td>
            <td className="hidden border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500 lg:table-cell">
              <>jeffrey.webb@example.com</>
            </td>
            <td className="border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500">Admin</td>
          </tr>
          <tr>
            <td className="border-b border-gray-200 py-4 pr-3 pl-4 text-sm font-medium whitespace-nowrap text-gray-900 sm:pl-6 lg:pl-8">
              <>Kathryn Murphy</>
            </td>
            <td className="hidden border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500 lg:table-cell">
              <>kathryn.murphy@example.com</>
            </td>
            <td className="border-b border-gray-200 px-3 py-4 text-sm whitespace-nowrap text-gray-500">Miembro</td>
          </tr>
        </tbody>
      </table>
    </div>
  }
</Example>

```html
<!-- [!code word:border-separate] -->
<!-- [!code word:border-spacing-0] -->
<table class="border-separate border-spacing-0">
  <thead class="bg-gray-50">
    <tr>
      <th class="sticky top-0 z-10 border-b border-gray-300 ...">Nombre</th>
      <th class="sticky top-0 z-10 border-b border-gray-300 ...">Email</th>
      <th class="sticky top-0 z-10 border-b border-gray-300 ...">Rol</th>
    </tr>
  </thead>
  <tbody class="bg-white">
    <tr>
      <td class="border-b border-gray-200 ...">Courtney Henry</td>
      <td class="border-b border-gray-200 ...">courtney.henry@example.com</td>
      <td class="border-b border-gray-200 ...">Admin</td>
    </tr>
    <!-- ... -->
  </tbody>
</table>
```

</Figure>

Pensar√≠as que podr√≠as usar `border-collapse` aqu√≠, ya que en realidad no quieres ning√∫n espacio entre los bordes, pero te equivocar√≠as. Sin `border-separate` y `border-spacing-0`, el borde se desplazar√° en lugar de quedarse fijo debajo de los encabezados. CSS es divertido, ¬øno?

Consulta la [documentaci√≥n de espaciado de borde](https://v3.tailwindcss.com/docs/border-spacing) para obtener m√°s detalles.

## Variantes Enabled y optional

Hemos a√±adido nuevas variantes para las pseudo-clases `:enabled` y `:optional`, que apuntan a los elementos de formulario cuando est√°n, bueno, habilitados y opcionales.

_"Pero Adam, ¬øpor qu√© necesitar√≠a esto alguna vez? Habilitado y opcional ni siquiera son estados, son los predeterminados. ¬øAcaso haces sitios web?"_

Ay, eso duele porque es verdad ‚Äî pr√°cticamente solo escribo correos electr√≥nicos y respondo las mismas preguntas una y otra vez en GitHub ahora.

Pero mira este ejemplo de bot√≥n deshabilitado:

<Figure>

<Example>
  {
    <div className="flex items-center justify-center">
      <button
        type="button"
        className="inline-flex cursor-not-allowed items-center rounded-md bg-indigo-500 px-4 py-2 text-sm leading-6 font-semibold text-white shadow transition duration-150 ease-in-out hover:bg-indigo-400 disabled:opacity-75"
        disabled
      >
        Procesando...
      </button>
    </div>
  }
</Example>

```html
<button type="button" class="bg-indigo-500 hover:bg-indigo-400 disabled:opacity-75 ..." disabled>Procesando...</button>
```

</Figure>

¬øNotas c√≥mo cuando pasas el cursor sobre el bot√≥n, el fondo todav√≠a cambia de color aunque est√© deshabilitado? Antes de esta versi√≥n, normalmente arreglar√≠as eso as√≠:

```html
<!-- [!code word:disabled\:hover\:bg-indigo-500] -->
<button
  type="button"
  class="bg-indigo-500 hover:bg-indigo-400 disabled:opacity-75 disabled:hover:bg-indigo-500 ..."
  disabled
>
  Procesando...
</button>
```

Pero con el nuevo modificador `enabled`, puedes escribirlo as√≠ en su lugar:

<Figure>

<Example>
  {
    <div className="flex items-center justify-center">
      <button
        type="button"
        className="inline-flex cursor-not-allowed items-center rounded-md bg-indigo-500 px-4 py-2 text-sm leading-6 font-semibold text-white shadow transition duration-150 ease-in-out hover:enabled:bg-indigo-400 disabled:opacity-75"
        disabled
      >
        Procesando...
      </button>
    </div>
  }
</Example>

```html
<!-- [!code word:hover\:enabled\:bg-indigo-400] -->
<button type="button" class="bg-indigo-500 hover:enabled:bg-indigo-400 disabled:opacity-75 ..." disabled>
  Procesando...
</button>
```

</Figure>

En lugar de anular el color de hover volviendo al color predeterminado cuando el bot√≥n est√° deshabilitado, combinamos las variantes `hover` y `enabled` para simplemente no aplicar los estilos de hover cuando el bot√≥n est√° deshabilitado en primer lugar. ¬°Creo que eso es mejor!

Aqu√≠ hay un ejemplo que combina el nuevo modificador `optional` con nuestras [caracter√≠sticas de estado de hermano](https://v3.tailwindcss.com/docs/hover-focus-and-other-states#styling-based-on-sibling-state) para ocultar un peque√±o aviso "Requerido" para los campos que no son requeridos:

<Figure>

<Example padding={false}>
  {
    <div className="mx-auto max-w-sm bg-white px-6 py-5 shadow">
      <form>
        <div>
          <label htmlFor="optional-email" className="block text-sm font-medium text-slate-700">
            <>Email</>
          </label>
          <div className="relative mt-1">
            <input
              required
              type="text"
              name="email"
              id="optional-email"
              className="peer block w-full rounded-md border border-slate-300 bg-white px-3 py-2 placeholder-slate-400 shadow-sm focus:border-sky-500 focus:ring-1 focus:ring-sky-500 focus:outline-none sm:text-sm"
            />
            <div className="absolute inset-y-0 right-0 border-y border-transparent py-2 pr-3 text-sm text-slate-400 peer-optional:hidden">
              <>Requerido</>
            </div>
          </div>
        </div>
        <div className="mt-6">
          <label htmlFor="optional-name" className="block text-sm font-medium text-slate-700">
            <>Nombre</>
          </label>
          <div className="relative mt-1">
            <input
              type="text"
              name="name"
              id="optional-name"
              className="peer block w-full rounded-md border border-slate-300 bg-white px-3 py-2 placeholder-slate-400 shadow-sm focus:border-sky-500 focus:ring-1 focus:ring-sky-500 focus:outline-none sm:text-sm"
            />
            <div className="absolute inset-y-0 right-0 border-y border-transparent py-2 pr-3 text-sm text-slate-400 peer-optional:hidden">
              <>Requerido</>
            </div>
          </div>
        </div>
        <div className="mt-6 text-right">
          <button className="rounded-md bg-sky-500 px-5 py-2.5 text-sm leading-5 font-semibold text-white hover:bg-sky-700">
            <>Enviar</>
          </button>
        </div>
      </form>
    </div>
  }
</Example>

```html
<form>
  <div>
    <label for="email" ...>Email</label>
    <div>
      <input required class="peer ..." id="email" />
      <!-- [!code word:peer-optional\:hidden] -->
      <div class="peer-optional:hidden ...">Requerido</div>
    </div>
  </div>
  <div>
    <label for="name" ...>Nombre</label>
    <div>
      <input class="peer ..." id="name" />
      <div class="peer-optional:hidden ...">Requerido</div>
    </div>
  </div>
  <!-- ... -->
</form>
```

</Figure>

Esto te permite usar el mismo marcado para todos tus grupos de formularios y dejar que CSS maneje todo el renderizado condicional por ti en lugar de manejarlo t√∫ mismo. ¬°Bastante ingenioso!

## Variantes Prefers-contrast

¬øSab√≠as que hay una media query `prefers-contrast`? Bueno, existe, y ahora Tailwind la soporta de forma predeterminada.

Usa las nuevas variantes `contrast-more` y `contrast-less` para modificar tu dise√±o cuando el usuario ha solicitado m√°s o menos contraste, generalmente a trav√©s de una preferencia de accesibilidad del sistema operativo como "Aumentar contraste" en macOS.

<Figure hint="Intenta emular `prefers-contrast: more` en tus herramientas de desarrollador para ver los cambios">

<Example padding={false}>
  {
    <div className="mx-auto max-w-sm bg-white px-6 pt-6 pb-4 shadow">
      <form>
        <div>
          <label htmlFor="contrast-example" className="block text-sm font-medium text-slate-700">
            N√∫mero de Seguro Social
          </label>
          <div className="mt-1">
            <input
              type="text"
              name="contrast-example"
              id="contrast-example"
              className="block w-full rounded-md border border-slate-200 bg-white px-3 py-2 placeholder-slate-400 shadow-sm focus:border-sky-500 focus:ring-1 focus:ring-sky-500 focus:outline-none contrast-more:border-slate-400 contrast-more:placeholder-slate-500 sm:text-sm"
              placeholder="000-00-0000"
            />
            <p className="mt-2 text-sm text-slate-600 opacity-10 contrast-more:opacity-100">
              <>Necesitamos esto para robar tu identidad.</>
            </p>
          </div>
        </div>
      </form>
    </div>
  }
</Example>

```html
<form>
  <label class="block">
    <span class="block text-sm font-medium text-slate-700">N√∫mero de Seguro Social</span>
    <!-- [!code word:contrast-more\:border-slate-400] -->
    <!-- [!code word:contrast-more\:placeholder-slate-500] -->
    <!-- [!code word:contrast-more\:opacity-100] -->
    <input
      class="border-slate-200 placeholder-slate-400 contrast-more:border-slate-400 contrast-more:placeholder-slate-500"
    />
    <p class="mt-2 text-sm text-slate-600 opacity-10 contrast-more:opacity-100">Necesitamos esto para robar tu identidad.</p>
  </label>
</form>
```

</Figure>

Escrib√≠ [alguna documentaci√≥n](https://v3.tailwindcss.com/docs/hover-focus-and-other-states#prefers-contrast) para esto, pero honestamente escrib√≠ m√°s aqu√≠ que all√≠.

## Estilizar backdrops de di√°logo nativos

Hay un elemento HTML `<dialog>` bastante nuevo](https://developer.mozilla.org/es/docs/Web/HTML/Element/dialog) con un [soporte de navegador](https://caniuse.com/dialog) sorprendentemente decente con el que vale la pena jugar si te gusta vivir al l√≠mite.

Los di√°logos tienen este nuevo pseudo-elemento `::backdrop` que se renderiza mientras el di√°logo est√° abierto, y Tailwind CSS v3.1 a√±ade un nuevo modificador `backdrop` que puedes usar para estilizar a este beb√©:

```html
<dialog class="backdrop:bg-slate-900/50 ...">
  <form method="dialog">
    <!-- ... -->
    <button value="cancel">Cancelar</button>
    <button>Enviar</button>
  </form>
</dialog>
```

Recomiendo leer la [documentaci√≥n de MDN sobre Dialog](https://developer.mozilla.org/es/docs/Web/HTML/Element/dialog) si quieres profundizar m√°s en esto ‚Äî es algo emocionante pero hay mucho que saber.

## Valores arbitrarios pero para variantes

Ok, as√≠ que este es el verdadero punto culminante para m√≠ ‚Äî ¬øsabes c√≥mo te damos la [API `addVariant`](https://v3.tailwindcss.com/docs/plugins#adding-variants) para crear tus propias variantes personalizadas?

```js
// [!code filename:tailwind.config.js]
const plugin = require("tailwindcss/plugin");

module.exports = {
  // ...
  plugins: [
    plugin(function ({ addVariant }) {
      // [!code highlight:2]
      addVariant("third", "&:nth-child(3)");
    }),
  ],
};
```

...¬øy sabes c√≥mo tenemos [valores arbitrarios](https://v3.tailwindcss.com/docs/adding-custom-styles#using-arbitrary-values) para usar cualquier valor que quieras con una utilidad directamente en tu HTML?

```html
<!-- [!code word:top-[117px]] -->
<div class="top-[117px]">
  <!-- ... -->
</div>
```

Bueno, Tailwind CSS v3.1 introduce [variantes arbitrarias](https://v3.tailwindcss.com/docs/hover-focus-and-other-states#using-arbitrary-variants), permiti√©ndote crear tus propias variantes ad hoc directamente en tu HTML:

```html
<!-- [!code word:[&\:nth-child(3)\]] -->
<div class="[&:nth-child(3)]:py-0">
  <!-- ... -->
</div>
```

Esto es s√∫per √∫til para variantes que de alguna manera parecen necesitar ser parametrizadas, por ejemplo, a√±adir un estilo si el navegador soporta una caracter√≠stica CSS espec√≠fica usando una consulta `@supports`:

```html
<!-- [!code word:@supports(backdrop-filter\:blur(0))\]\:bg-white/50] -->
<!-- [!code word:[@supports(backdrop-filter\:blur(0))\]\:backdrop-blur] -->
<div
  class="bg-white [@supports(backdrop-filter:blur(0))]:bg-white/50 [@supports(backdrop-filter:blur(0))]:backdrop-blur"
>
  <!-- ... -->
</div>
```

Incluso puedes usar esta caracter√≠stica para apuntar a elementos hijos con variantes arbitrarias como `[&>*]`:

<Figure>

<Example>
  {
    <div className="mx-auto max-w-md">
      <ul role="list" className="space-y-4 [&>*]:rounded-lg [&>*]:bg-white [&>*]:p-4 [&>*]:shadow">
        <li className="flex">
          <img
            className="h-10 w-10 rounded-full"
            src="https://images.unsplash.com/photo-1550525811-e5869dd03032?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
            alt=""
          />
          <div className="ml-3 overflow-hidden">
            <p className="text-sm font-medium text-slate-900">Kristen Ramos</p>
            <p className="truncate text-sm text-slate-500">kristen.ramos@example.com</p>
          </div>
        </li>
        <li className="flex">
          <img
            className="h-10 w-10 rounded-full"
            src="https://images.unsplash.com/photo-1463453091185-61582044d556?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
            alt=""
          />
          <div className="ml-3 overflow-hidden">
            <p className="text-sm font-medium text-slate-900">Floyd Miles</p>
            <p className="truncate text-sm text-slate-500">floyd.miles@example.com</p>
          </div>
        </li>
        <li className="flex">
          <img
            className="h-10 w-10 rounded-full"
            src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
            alt=""
          />
          <div className="ml-3 overflow-hidden">
            <p className="text-sm font-medium text-slate-900">Courtney Henry</p>
            <p className="truncate text-sm text-slate-500">courtney.henry@example.com</p>
          </div>
        </li>
      </ul>
    </div>
  }
</Example>

```html
<!-- [!code word:[&>*\]\:p-4] -->
<!-- [!code word:[&>*\]\:bg-white] -->
<!-- [!code word:[&>*\]\:rounded-lg] -->
<!-- [!code word:[&>*\]\:shadow] -->
<ul role="list" class="space-y-4 [&>*]:rounded-lg [&>*]:bg-white [&>*]:p-4 [&>*]:shadow">
  <li class="flex">
    <img class="h-10 w-10 rounded-full" src="..." alt="" />
    <div class="ml-3 overflow-hidden">
      <p class="text-sm font-medium text-slate-900">Kristen Ramos</p>
      <p class="truncate text-sm text-slate-500">kristen.ramos@example.com</p>
</div>
  </li>
  <!-- ... -->
</ul>
```

</Figure>

Incluso puedes estilizar el primer `p` dentro del `div` en el segundo `li` hijo pero solo en `hover`:

<Figure hint="Intenta pasar el cursor sobre el texto 'Floyd Miles'">

<Example>
  {
    <div className="mx-auto max-w-md">
      <ul
        role="list"
        className="space-y-4 [&>*]:rounded-lg [&>*]:bg-white [&>*]:p-4 [&>*]:shadow hover:[&>li:nth-child(2)>div>p:first-child]:text-indigo-500"
      >
        <li className="flex">
          <img
            className="h-10 w-10 rounded-full"
            src="https://images.unsplash.com/photo-1550525811-e5869dd03032?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
            alt=""
          />
          <div className="ml-3 overflow-hidden">
            <p className="text-sm font-medium text-slate-900">Kristen Ramos</p>
            <p className="truncate text-sm text-slate-500">kristen.ramos@example.com</p>
          </div>
        </li>
        <li className="flex">
          <img
            className="h-10 w-10 rounded-full"
            src="https://images.unsplash.com/photo-1463453091185-61582044d556?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
            alt=""
          />
          <div className="ml-3 overflow-hidden">
            <p className="text-sm font-medium text-slate-900">Floyd Miles</p>
            <p className="truncate text-sm text-slate-500">floyd.miles@example.com</p>
          </div>
        </li>
        <li className="flex">
          <img
            className="h-10 w-10 rounded-full"
            src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
            alt=""
          />
          <div className="ml-3 overflow-hidden">
            <p className="text-sm font-medium text-slate-900">Courtney Henry</p>
            <p className="truncate text-sm text-slate-500">courtney.henry@example.com</p>
          </div>
        </li>
      </ul>
    </div>
  }
</Example>

```html
<!-- [!code word:hover\:[&>li\:nth-child(2)>div>p\:first-child\]\:text-indigo-500] -->
<ul
  role="list"
  class="space-y-4 [&>*]:rounded-lg [&>*]:bg-white [&>*]:p-4 [&>*]:shadow hover:[&>li:nth-child(2)>div>p:first-child]:text-indigo-500"
>
  <!-- ... -->
  <li class="flex">
    <img class="h-10 w-10 rounded-full" src="..." alt="" />
    <div class="ml-3 overflow-hidden">
      <p class="text-sm font-medium text-slate-900">Floyd Miles</p>
      <p class="truncate text-sm text-slate-500">floyd.miles@example.com</p>
</div>
  </li>
  <!-- ... -->
</ul>
```

</Figure>

Ahora, _deber√≠as_ hacer esto? Probablemente no muy a menudo, pero honestamente puede ser una v√≠a de escape bastante √∫til cuando intentas estilizar HTML que no puedes cambiar directamente. Es un cuchillo afilado, pero los mejores chefs no preparan comida con tijeras de seguridad.

Juega un poco con ellas y apuesto a que encontrar√°s que son una gran herramienta cuando la situaci√≥n lo requiere. Las estamos usando en un par de puntos complicados en estas nuevas plantillas de sitio web en las que estamos trabajando y la experiencia es mucho m√°s agradable que crear una clase personalizada.

---

¬°As√≠ que eso es Tailwind CSS v3.1! Es solo un cambio de versi√≥n menor, as√≠ que no hay cambios que rompan la compatibilidad y deber√≠as poder actualizar tu proyecto simplemente instalando la √∫ltima versi√≥n:

```sh
npm install tailwindcss@latest
```

Para la lista completa de cambios, incluyendo correcciones de errores y algunas mejoras menores de las que no habl√© aqu√≠, profundiza en las [notas de la versi√≥n](https://github.com/tailwindlabs/tailwindcss/releases/tag/v3.1.0) en GitHub.

Ya tengo un mont√≥n de ideas para Tailwind CSS v3.2 _(¬°quiz√°s incluso sombras de texto finalmente?!)_, pero ahora mismo estamos trabajando duro para llevar estas nuevas [plantillas de sitio web](/blog/2022-05-23-headless-ui-v1-6-tailwind-ui-team-management#tailwind-css-templates-are-coming-soon) a la l√≠nea de meta. ¬°Busca otra actualizaci√≥n sobre ese tema en la pr√≥xima semana o dos!
